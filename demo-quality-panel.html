<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–µ–º–æ - –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å</title>
    <link rel="stylesheet" href="style.css?v=2025090203">
    <style>
        body {
            padding: 20px;
            background: #f5f5f5;
        }
        .demo-container {
            max-width: 800px;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <div class="demo-container">
        <h1>üîç –î–µ–º–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–π –ø–∞–Ω–µ–ª–∏</h1>
        <p>–í–æ—Ç –∫–∞–∫ –¥–æ–ª–∂–Ω–∞ –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å –ø–æ —Ç–≤–æ–∏–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:</p>
        
        <!-- –û–ü –ü–†–û–í–ï–†–û–ß–ù–ê–Ø –ü–ê–ù–ï–õ–¨ -->
        <div class="card">
            <h3>üîç –ü—Ä–æ–≤–µ—Ä–æ—á–Ω–∞—è –ø–∞–Ω–µ–ª—å –û–ü</h3>
            <form id="op-quality-form" class="quality-check-form-new">
                <!-- –û–±—â–∏–µ –ø–æ–ª—è -->
                <div class="general-fields">
                    <div class="field-row">
                        <label>–î–∞—Ç–∞:</label>
                        <input type="date" id="op-check-date" required>
                    </div>
                    
                    <div class="field-row">
                        <label>–ú–µ–Ω–µ–¥–∂–µ—Ä:</label>
                        <select id="op-check-manager" required>
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞</option>
                            <option value="–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤">–ò–≤–∞–Ω –ü–µ—Ç—Ä–æ–≤</option>
                            <option value="–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞">–ú–∞—Ä–∏—è –°–∏–¥–æ—Ä–æ–≤–∞</option>
                            <option value="–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤">–ê–ª–µ–∫—Å–µ–π –ö–æ–∑–ª–æ–≤</option>
                            <option value="–ï–ª–µ–Ω–∞ –†–æ–º–∞–Ω–æ–≤–∞">–ï–ª–µ–Ω–∞ –†–æ–º–∞–Ω–æ–≤–∞</option>
                        </select>
                    </div>
                </div>
                
                <!-- –ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –û–ü -->
                <div class="indicators-list">
                    <h4>–ü–æ–∫–∞–∑–∞—Ç–µ–ª–∏ –û–ü:</h4>
                    
                    <!-- –†–∞–±–æ—Ç–∞ —Å –ö–≠–í -->
                    <div class="indicator-block">
                        <div class="indicator-header" onclick="toggleDetails('op-kev-details')">
                            <label class="indicator-switch">
                                <input type="checkbox" id="op-kev-switch" onchange="toggleIndicator('op', 'kev')">
                                <span class="switch-slider"></span>
                            </label>
                            <span class="indicator-title">–†–∞–±–æ—Ç–∞ —Å –ö–≠–í</span>
                        </div>
                        <div class="indicator-details" id="op-kev-details">
                            <input type="url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É" id="op-kev-link">
                            <input type="text" placeholder="ID —Å–¥–µ–ª–∫–∏" id="op-kev-dealid">
                            <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω)" id="op-kev-comment"></textarea>
                            <div class="screenshot-upload-mini">
                                <input type="file" accept="image/*" id="op-kev-screenshot" style="display: none;">
                                <button type="button" onclick="document.getElementById('op-kev-screenshot').click()">üìé –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                                <div class="screenshot-preview-mini" id="op-kev-preview"></div>
                            </div>
                            <div class="validation-error" id="op-kev-error">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω</div>
                        </div>
                    </div>
                    
                    <!-- –°—Ä–æ–∫–∏ -->
                    <div class="indicator-block">
                        <div class="indicator-header" onclick="toggleDetails('op-deadlines-details')">
                            <label class="indicator-switch">
                                <input type="checkbox" id="op-deadlines-switch" onchange="toggleIndicator('op', 'deadlines')">
                                <span class="switch-slider"></span>
                            </label>
                            <span class="indicator-title">–°—Ä–æ–∫–∏</span>
                        </div>
                        <div class="indicator-details" id="op-deadlines-details">
                            <input type="url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É" id="op-deadlines-link">
                            <input type="text" placeholder="ID —Å–¥–µ–ª–∫–∏" id="op-deadlines-dealid">
                            <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω)" id="op-deadlines-comment"></textarea>
                            <div class="screenshot-upload-mini">
                                <input type="file" accept="image/*" id="op-deadlines-screenshot" style="display: none;">
                                <button type="button" onclick="document.getElementById('op-deadlines-screenshot').click()">üìé –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                                <div class="screenshot-preview-mini" id="op-deadlines-preview"></div>
                            </div>
                            <div class="validation-error" id="op-deadlines-error">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω</div>
                        </div>
                    </div>
                    
                    <!-- –û–±—â–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º -->
                    <div class="indicator-block">
                        <div class="indicator-header" onclick="toggleDetails('op-communication-details')">
                            <label class="indicator-switch">
                                <input type="checkbox" id="op-communication-switch" onchange="toggleIndicator('op', 'communication')">
                                <span class="switch-slider"></span>
                            </label>
                            <span class="indicator-title">–û–±—â–µ–Ω–∏–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º</span>
                        </div>
                        <div class="indicator-details" id="op-communication-details">
                            <input type="url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É" id="op-communication-link">
                            <input type="text" placeholder="ID —Å–¥–µ–ª–∫–∏" id="op-communication-dealid">
                            <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω)" id="op-communication-comment"></textarea>
                            <div class="screenshot-upload-mini">
                                <input type="file" accept="image/*" id="op-communication-screenshot" style="display: none;">
                                <button type="button" onclick="document.getElementById('op-communication-screenshot').click()">üìé –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                                <div class="screenshot-preview-mini" id="op-communication-preview"></div>
                            </div>
                            <div class="validation-error" id="op-communication-error">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω</div>
                        </div>
                    </div>
                    
                    <!-- –ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è CRM -->
                    <div class="indicator-block">
                        <div class="indicator-header" onclick="toggleDetails('op-crm-details')">
                            <label class="indicator-switch">
                                <input type="checkbox" id="op-crm-switch" onchange="toggleIndicator('op', 'crm')">
                                <span class="switch-slider"></span>
                            </label>
                            <span class="indicator-title">–ü—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è CRM</span>
                        </div>
                        <div class="indicator-details" id="op-crm-details">
                            <input type="url" placeholder="–°—Å—ã–ª–∫–∞ –Ω–∞ —Å–¥–µ–ª–∫—É" id="op-crm-link">
                            <input type="text" placeholder="ID —Å–¥–µ–ª–∫–∏" id="op-crm-dealid">
                            <textarea placeholder="–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω)" id="op-crm-comment"></textarea>
                            <div class="screenshot-upload-mini">
                                <input type="file" accept="image/*" id="op-crm-screenshot" style="display: none;">
                                <button type="button" onclick="document.getElementById('op-crm-screenshot').click()">üìé –°–∫—Ä–∏–Ω—à–æ—Ç</button>
                                <div class="screenshot-preview-mini" id="op-crm-preview"></div>
                            </div>
                            <div class="validation-error" id="op-crm-error">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –µ—Å–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –≤—ã–∫–ª—é—á–µ–Ω</div>
                        </div>
                    </div>
                </div>
                
                <div class="quality-actions">
                    <button type="submit" class="btn-primary">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É</button>
                    <button type="button" class="btn-secondary" onclick="clearForm()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é –¥–∞—Ç—É
        document.getElementById('op-check-date').value = new Date().toISOString().split('T')[0];
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –¥–µ—Ç–∞–ª–µ–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        function toggleDetails(detailsId) {
            const details = document.getElementById(detailsId);
            details.classList.toggle('active');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        function toggleIndicator(department, indicator) {
            const checkbox = document.getElementById(`${department}-${indicator}-switch`);
            const details = document.getElementById(`${department}-${indicator}-details`);
            const error = document.getElementById(`${department}-${indicator}-error`);
            
            // –ü–æ–∫–∞–∑–∞—Ç—å/—Å–∫—Ä—ã—Ç—å –¥–µ—Ç–∞–ª–∏
            if (checkbox.checked || details.classList.contains('active')) {
                details.classList.add('active');
            }
            
            // –í–∞–ª–∏–¥–∞—Ü–∏—è
            validateIndicator(department, indicator);
        }
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞
        function validateIndicator(department, indicator) {
            const checkbox = document.getElementById(`${department}-${indicator}-switch`);
            const comment = document.getElementById(`${department}-${indicator}-comment`);
            const error = document.getElementById(`${department}-${indicator}-error`);
            const details = document.getElementById(`${department}-${indicator}-details`);
            
            if (!checkbox.checked && !comment.value.trim()) {
                details.classList.add('invalid');
                error.classList.add('show');
                return false;
            } else {
                details.classList.remove('invalid');
                error.classList.remove('show');
                return true;
            }
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
        document.addEventListener('change', function(e) {
            if (e.target.type === 'file' && e.target.accept === 'image/*') {
                const file = e.target.files[0];
                if (file) {
                    const previewId = e.target.id.replace('-screenshot', '-preview');
                    const preview = document.getElementById(previewId);
                    
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        preview.innerHTML = `
                            <img src="${event.target.result}" alt="–ü—Ä–µ–≤—å—é">
                            <button type="button" class="remove-btn" onclick="removeScreenshot('${previewId}', '${e.target.id}')">&times;</button>
                        `;
                    };
                    reader.readAsDataURL(file);
                }
            }
        });
        
        // –£–¥–∞–ª–µ–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞
        function removeScreenshot(previewId, inputId) {
            document.getElementById(previewId).innerHTML = '';
            document.getElementById(inputId).value = '';
        }
        
        // –û—á–∏—Å—Ç–∫–∞ —Ñ–æ—Ä–º—ã
        function clearForm() {
            document.getElementById('op-quality-form').reset();
            document.querySelectorAll('.indicator-details').forEach(detail => {
                detail.classList.remove('active', 'invalid');
            });
            document.querySelectorAll('.validation-error').forEach(error => {
                error.classList.remove('show');
            });
            document.querySelectorAll('.screenshot-preview-mini').forEach(preview => {
                preview.innerHTML = '';
            });
        }
        
        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ä–º—ã
        document.getElementById('op-quality-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let isValid = true;
            const indicators = ['kev', 'deadlines', 'communication', 'crm'];
            
            indicators.forEach(indicator => {
                if (!validateIndicator('op', indicator)) {
                    isValid = false;
                }
            });
            
            if (isValid) {
                alert('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!');
                // –ó–¥–µ—Å—å –±—ã–ª –±—ã –∫–æ–¥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
            } else {
                alert('‚ùå –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏');
            }
        });
        
        // –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è
        document.addEventListener('input', function(e) {
            if (e.target.tagName === 'TEXTAREA') {
                const parts = e.target.id.split('-');
                if (parts.length >= 3) {
                    const department = parts[0];
                    const indicator = parts[1];
                    validateIndicator(department, indicator);
                }
            }
        });
    </script>
</body>
</html>